# DeerFlow Production Environment Configuration
# Copy this file to .env and fill in your values

# =============================================================================
# LLM CONFIGURATION (REQUIRED)
# =============================================================================

# OpenAI API Key (REQUIRED for all features)
OPENAI_API_KEY=sk-...

# Optional: Additional LLM providers
# ANTHROPIC_API_KEY=...
# GEMINI_API_KEY=...

# =============================================================================
# SEARCH PROVIDERS (At least one REQUIRED)
# =============================================================================

# Tavily Search API (Recommended - best for research)
TAVILY_API_KEY=tvly-...

# Firecrawl (Optional - deep web scraping)
# FIRECRAWL_API_KEY=fc-...
# FIRECRAWL_CONCURRENCY=5

# Brave Search (Optional)
# BRAVE_API_KEY=...

# DuckDuckGo (No API key needed, but limited)
# No configuration needed

# =============================================================================
# AUTHENTICATION (IMPORTANT FOR PRODUCTION!)
# =============================================================================

# SECURITY: Set to false in production!
SKIP_AUTH=false

# Generate secure keys with: openssl rand -hex 16
ADMIN_API_KEY=sk_live_REPLACE_WITH_SECURE_KEY
DEV_API_KEY=sk_test_REPLACE_WITH_SECURE_KEY

# Optional: Additional API keys
# API_KEY_1=sk_live_...
# API_KEY_2=sk_live_...

# =============================================================================
# DATABASE (Optional - for job persistence)
# =============================================================================

# Supabase Configuration
# SUPABASE_URL=https://xxxxx.supabase.co
# SUPABASE_KEY=eyJhbGc...
# LANGGRAPH_CHECKPOINT_SAVER=true  # Enable persistent checkpoints

# PostgreSQL (Alternative to Supabase)
# DATABASE_URL=postgresql://user:password@localhost:5432/deerflow

# =============================================================================
# RAG PROVIDER (Optional - for private knowledge bases)
# =============================================================================

# Choose one: ragflow, milvus, vikingdb_knowledge_base, dify, moi
# RAG_PROVIDER=ragflow

# RAGFlow Configuration
# RAGFLOW_API_KEY=ragflow-...
# RAGFLOW_BASE_URL=https://api.ragflow.io

# Milvus Configuration
# MILVUS_HOST=localhost
# MILVUS_PORT=19530
# MILVUS_USER=root
# MILVUS_PASSWORD=milvus

# VikingDB Configuration
# VIKINGDB_HOST=api.vikingdb.com
# VIKINGDB_REGION=cn-beijing
# VIKINGDB_KNOWLEDGE_BASE_API_KEY=vk-...

# Dify Configuration
# DIFY_API_KEY=app-...
# DIFY_BASE_URL=https://api.dify.ai

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Bind address (127.0.0.1 for nginx proxy, 0.0.0.0 for direct access)
HOST=127.0.0.1

# Port
PORT=8000

# Log level: debug, info, warning, error, critical
LOG_LEVEL=info

# CORS allowed origins (comma-separated)
ALLOWED_ORIGINS=https://yourdomain.com,https://api.yourdomain.com

# =============================================================================
# OPTIONAL FEATURES
# =============================================================================

# MCP Server Configuration (Use with caution in production)
# ENABLE_MCP_SERVER_CONFIGURATION=false

# Python REPL (Disabled by default for security)
# ENABLE_PYTHON_REPL=false

# Text-to-Speech (For podcast generation)
# TTS_PROVIDER=volcengine
# TTS_APP_ID=...
# TTS_ACCESS_KEY=...
# TTS_SECRET_KEY=...

# =============================================================================
# PERFORMANCE TUNING (Optional)
# =============================================================================

# Maximum concurrent requests
# MAX_WORKERS=4

# Request timeout (seconds)
# REQUEST_TIMEOUT=300

# Memory limit per request
# MAX_MEMORY_MB=512

# =============================================================================
# MONITORING (Optional)
# =============================================================================

# Sentry Error Tracking
# SENTRY_DSN=https://...@sentry.io/...

# Application Insights
# APPLICATIONINSIGHTS_CONNECTION_STRING=...

# =============================================================================
# NOTES
# =============================================================================

# 1. SECURITY: Never commit this file with real secrets!
# 2. Use strong API keys in production
# 3. Enable HTTPS via nginx + certbot
# 4. Set SKIP_AUTH=false in production
# 5. Regularly rotate API keys
# 6. Monitor logs for suspicious activity
# 7. Keep dependencies updated: uv sync

# =============================================================================
# QUICK START CHECKLIST
# =============================================================================

# [ ] Set OPENAI_API_KEY
# [ ] Set at least one search provider key (TAVILY_API_KEY recommended)
# [ ] Set SKIP_AUTH=false
# [ ] Generate and set ADMIN_API_KEY and DEV_API_KEY
# [ ] Set ALLOWED_ORIGINS to your frontend domain
# [ ] (Optional) Configure database for job persistence
# [ ] (Optional) Configure RAG provider for private knowledge
# [ ] Test configuration: uv run python server.py
# [ ] Deploy: ./deployment/deploy-lightsail.sh
